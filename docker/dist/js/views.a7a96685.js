(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views"],{"4daa":function(e,t,a){},"696f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Analysis")],1)},s=[],i=a("d2dc"),o={name:"wel",components:{Analysis:i["default"]},data:function(){return{}},methods:{}},r=o,l=a("2877"),c=Object(l["a"])(r,n,s,!1,null,"1e7dc43d",null);t["default"]=c.exports},d2dc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("div",{staticClass:"analysis-box"},e._l(e.myArray,(function(t){return a("div",{key:t.id,staticClass:"drag-item",attrs:{id:t.id,draggable:"true"},on:{dragstart:function(a){return e.handleDragStart(a,t)},dragover:function(a){return a.preventDefault(),e.handleDragOver(a,t)},dragenter:function(a){return e.handleDragEnter(a,t)},dragend:function(a){return e.handleDragEnd(a,t)}}},["assetsLevelByMonth"===t.id?a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex"},attrs:{inline:!0,model:e.searchProjectForm}},[a("el-form-item",[a("el-tooltip",{attrs:{content:e.$t("analysis.最近几个月"),placement:"bottom",effect:"light"}},[a("el-input-number",{attrs:{min:1,max:36,"controls-position":"right",size:"mini"},nativeOn:{"!keydown":function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"]))return null;t.stopPropagation(),t.preventDefault()}},model:{value:e.searchProjectForm.monthNum,callback:function(t){e.$set(e.searchProjectForm,"monthNum",t)},expression:"searchProjectForm.monthNum"}})],1)],1),a("el-form-item",{attrs:{"label-width":"30px"}},[a("el-tooltip",{attrs:{content:e.$t("analysis.统计方式"),placement:"bottom",effect:"light"}},[a("el-select",{attrs:{size:"mini"},model:{value:e.searchProjectForm.statisticalMethod,callback:function(t){e.$set(e.searchProjectForm,"statisticalMethod",t)},expression:"searchProjectForm.statisticalMethod"}},e._l(e.statisticalMethodOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchProjectBtn}},[e._v(e._s(e.$t("analysis.查询")))])],1)],1),a("div",{staticStyle:{width:"100%",height:"250px"},attrs:{id:"getAssetsLevelByMonth"}})],1):e._e(),"businessScenarioLevelByMonth"===t.id?a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex"},attrs:{inline:!0,model:e.searchSceneForm}},[a("el-form-item",[a("el-tooltip",{attrs:{content:e.$t("analysis.最近几个月"),placement:"bottom",effect:"light"}},[a("el-input-number",{attrs:{min:1,max:36,"controls-position":"right",size:"mini"},nativeOn:{"!keydown":function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"]))return null;t.stopPropagation(),t.preventDefault()}},model:{value:e.searchSceneForm.monthNum,callback:function(t){e.$set(e.searchSceneForm,"monthNum",t)},expression:"searchSceneForm.monthNum"}})],1)],1),a("el-form-item",[a("el-tooltip",{attrs:{content:e.$t("analysis.统计方式"),placement:"bottom",effect:"light"}},[a("el-select",{attrs:{size:"mini"},model:{value:e.searchSceneForm.statisticalMethod,callback:function(t){e.$set(e.searchSceneForm,"statisticalMethod",t)},expression:"searchSceneForm.statisticalMethod"}},e._l(e.statisticalMethodOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchSceneBtn}},[e._v(e._s(e.$t("analysis.查询")))])],1)],1),a("div",{staticStyle:{width:"100%",height:"250px"},attrs:{id:"getBusinessScenarioLevelByMonth"}})],1):e._e(),"recentlyAssetsAndScene"===t.id?a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex"},attrs:{inline:!0,model:e.assetsAndSceneForm}},[a("el-form-item",[a("el-tooltip",{attrs:{content:e.$t("analysis.最近几个月"),placement:"bottom",effect:"light"}},[a("el-input-number",{attrs:{min:1,max:36,"controls-position":"right",size:"mini"},nativeOn:{"!keydown":function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"]))return null;t.stopPropagation(),t.preventDefault()}},model:{value:e.assetsAndSceneForm.months,callback:function(t){e.$set(e.assetsAndSceneForm,"months",t)},expression:"assetsAndSceneForm.months"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchAssetsAndSceneFormBtn}},[e._v(e._s(e.$t("analysis.查询")))])],1)],1),a("div",{staticStyle:{width:"100%",height:"250px"},attrs:{id:"getRecentlyAssetsAndScene"}})],1):e._e(),"projectOrderByDepartment"===t.id?a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex"},attrs:{inline:!0,model:e.assetsAndSceneForm}},[a("el-form-item",[a("el-tooltip",{attrs:{content:e.$t("analysis.统计方式"),placement:"bottom",effect:"light"}},[a("el-select",{attrs:{size:"mini"},model:{value:e.searchProjectByDepForm.statisticalMethod,callback:function(t){e.$set(e.searchProjectByDepForm,"statisticalMethod",t)},expression:"searchProjectByDepForm.statisticalMethod"}},e._l(e.statisticalMethodOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchProjectByDepFormBtn}},[e._v(e._s(e.$t("analysis.查询")))])],1)],1),a("div",{staticStyle:{width:"100%",height:"250px"},attrs:{id:"getProjectOrderByDepartment"}})],1):e._e(),"sceneOrderByDepartment"===t.id?a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex"},attrs:{inline:!0,model:e.assetsAndSceneForm}},[a("el-form-item",[a("el-tooltip",{attrs:{content:e.$t("analysis.统计方式"),placement:"bottom",effect:"light"}},[a("el-select",{attrs:{size:"mini"},model:{value:e.searchSceneByDepForm.statisticalMethod,callback:function(t){e.$set(e.searchSceneByDepForm,"statisticalMethod",t)},expression:"searchSceneByDepForm.statisticalMethod"}},e._l(e.statisticalMethodOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchSceneByDepFormBtn}},[e._v(e._s(e.$t("analysis.查询")))])],1)],1),a("div",{staticStyle:{width:"100%",height:"250px"},attrs:{id:"getSceneOrderByDepartment"}})],1):e._e()])})),0)])},s=[],i=(a("8e6e"),a("8615"),a("456d"),a("7514"),a("2909")),o=(a("ac6a"),a("ade3")),r=a("313e"),l=a("b5c6");function c(e){return Object(l["a"])({url:"/assessment/info/getAssetsByLevelAndDept",method:"get",params:e})}function m(e){return Object(l["a"])({url:"/assessment/info/getAssetsLevelByMonth",method:"get",params:e})}function d(e){return Object(l["a"])({url:"/assets/assetsProject/getProjectOrderByType",method:"get",params:e})}function h(e){return Object(l["a"])({url:"/assessment/info/getSceneByLevelAndDept",method:"get",params:e})}function y(e){return Object(l["a"])({url:"/assessment/info/getBusinessScenarioLevelByMonth",method:"get",params:e})}function u(e){return Object(l["a"])({url:"/assets/dataPanel/getRecentlyAssetsAndScene",method:"get",params:e})}var p=a("2f62");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"Analysis",components:{},data:function(){return{myArray:[{id:"assetsLevelByMonth"},{id:"businessScenarioLevelByMonth"},{id:"recentlyAssetsAndScene"},{id:"projectOrderByDepartment"},{id:"sceneOrderByDepartment"},{id:"getProjectOrderByType"}],ending:null,dragging:null,searchProjectForm:{monthNum:6,statisticalMethod:"average"},searchSceneForm:{monthNum:6,statisticalMethod:"average"},assetsAndSceneForm:{months:3},searchProjectByDepForm:{statisticalMethod:"average"},searchSceneByDepForm:{statisticalMethod:"average"},statisticalMethodOption:[{label:this.$t("analysis.平均分"),value:"average"},{label:this.$t("analysis.最高分"),value:"max"},{label:this.$t("analysis.最近评估"),value:"recent"}],chartList:[]}},computed:g({},Object(p["b"])(["keyCollapse"])),watch:{keyCollapse:{handler:function(e,t){this.chartList.forEach((function(e){e.dispose()})),this.init()}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.getProjectOrderByDepartment(this.searchProjectByDepForm),this.getAssetsLevelByMonth(this.searchProjectForm),this.getProjectOrderByType(),this.getSceneOrderByDepartment(this.searchSceneByDepForm),this.getBusinessScenarioLevelByMonth(this.searchSceneForm),this.getRecentlyAssetsAndScene(this.assetsAndSceneForm)},handleDragStart:function(e,t){this.dragging=t},handleDragEnd:function(e,t){var a=this;if(this.ending.id!==this.dragging.id){var n=Object(i["a"])(this.myArray),s=n.indexOf(this.dragging),o=n.indexOf(this.ending);n.splice.apply(n,[s,1].concat(Object(i["a"])(n.splice(o,1,n[s])))),this.myArray=n,this.$nextTick((function(){a.dragging=null,a.ending=null}))}},handleDragOver:function(e){e.dataTransfer.dropEffect="move"},handleDragEnter:function(e,t){e.dataTransfer.effectAllowed="move",this.ending=t},searchProjectByDepFormBtn:function(){this.getProjectOrderByDepartment(this.searchProjectByDepForm)},getProjectOrderByDepartment:function(e){var t=this;c(e).then((function(e){var a,n=e.data.data,s=document.getElementById("getProjectOrderByDepartment"),i=r["a"](s);t.chartList.push(i),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:t.$t("analysis.资产分布按机构"),textStyle:{fontSize:14}},legend:{orient:"vertical",right:10,top:20,tooltip:{show:!0},textStyle:{width:50,overflow:"truncate"}},grid:{top:70,right:90,bottom:"3%",containLabel:!0},yAxis:{type:"value",name:t.$t("analysis.数量"),nameTextStyle:{color:"#1481f2",fontWeight:"bold"},axisLine:{show:!0}},xAxis:{type:"category",data:n.map((function(e){return e.deptName})),name:t.$t("analysis.部门"),nameTextStyle:{color:"#1481f2",fontWeight:"bold"}},series:[{name:t.$t("analysis.低风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.low})),itemStyle:{color:"#2AFFFF"}},{name:t.$t("analysis.中风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.middle})),itemStyle:{color:"#FFFF7F"}},{name:t.$t("analysis.高风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.high})),itemStyle:{color:"#FFAA55"}},{name:t.$t("analysis.极高风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.veryHigh})),itemStyle:{color:"#FF2A00"}},{name:t.$t("analysis.未评估"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.notEvaluated})),itemStyle:{color:"#cfc6d3"}}]},a&&i.setOption(a)}))},searchProjectBtn:function(){this.getAssetsLevelByMonth(this.searchProjectForm)},getAssetsLevelByMonth:function(e){var t=this;m(e).then((function(e){var a,n=e.data.data,s=document.getElementById("getAssetsLevelByMonth"),i=r["a"](s);t.chartList.push(i),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:t.$t("analysis.获取最近几个月的资产风险"),textStyle:{fontSize:14}},legend:{orient:"vertical",right:10,top:20,tooltip:{show:!0},textStyle:{width:50,overflow:"truncate"}},grid:{top:70,right:90,bottom:"3%",containLabel:!0},yAxis:{type:"value",name:t.$t("analysis.数量"),nameTextStyle:{color:"#1481f2",fontWeight:"bold"},axisLine:{show:!0}},xAxis:{type:"category",data:n.month,name:t.$t("analysis.月份"),nameTextStyle:{color:"#1481f2",fontWeight:"bold"}},series:[{name:t.$t("analysis.低风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.infos.map((function(e){return e.low})),itemStyle:{color:"#2AFFFF"}},{name:t.$t("analysis.中风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.infos.map((function(e){return e.middle})),itemStyle:{color:"#FFFF7F"}},{name:t.$t("analysis.高风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.infos.map((function(e){return e.high})),itemStyle:{color:"#FFAA55"}},{name:t.$t("analysis.极高风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.infos.map((function(e){return e.veryHigh})),itemStyle:{color:"#FF2A00"}}]},a&&i.setOption(a)}))},getProjectOrderByType:function(){var e=this;d().then((function(t){var a,n=t.data.data,s=document.getElementById("getProjectOrderByType"),i=r["a"](s);e.chartList.push(i),a={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},color:["#44a0ff","#e8ab52","#9ccb6e","#f77471","#fde2e2","#44a0ff","#e8ab52","#9ccb6e","#f77471","#fde2e2"],title:{text:e.$t("analysis.资产分布按个人信息敏感等级"),textStyle:{fontSize:14}},series:[{name:"",type:"pie",selectedMode:"single",radius:[0,"30%"],center:["43%","55%"],label:{position:"inner",fontSize:14},labelLine:{show:!1},data:[]},{name:"",type:"pie",radius:["45%","60%"],center:["43%","55%"],labelLine:{length:30},data:n}]},i.on("click",(function(e){a.series[0].data=a.series[1].data.find((function(t){return t.id===e.data.id})).ratio,a&&i.setOption(a)})),a&&i.setOption(a)}))},searchSceneByDepFormBtn:function(){this.getSceneOrderByDepartment(this.searchSceneByDepForm)},getSceneOrderByDepartment:function(e){var t=this;h(e).then((function(e){var a,n=e.data.data,s=document.getElementById("getSceneOrderByDepartment"),i=r["a"](s);t.chartList.push(i),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:t.$t("analysis.业务场景分布按机构"),textStyle:{fontSize:14}},legend:{orient:"vertical",right:10,top:20,tooltip:{show:!0},textStyle:{width:50,overflow:"truncate"}},grid:{top:70,right:90,bottom:"3%",containLabel:!0},yAxis:{type:"value",name:t.$t("analysis.数量"),nameTextStyle:{color:"#1481f2",fontWeight:"bold"},axisLine:{show:!0}},xAxis:{type:"category",data:n.map((function(e){return e.deptName})),name:t.$t("analysis.部门"),nameTextStyle:{color:"#1481f2",fontWeight:"bold"}},series:[{name:t.$t("analysis.低风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.low})),itemStyle:{color:"#2AFFFF"}},{name:t.$t("analysis.中风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.middle})),itemStyle:{color:"#FFFF7F"}},{name:t.$t("analysis.高风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.high})),itemStyle:{color:"#FFAA55"}},{name:t.$t("analysis.极高风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.veryHigh})),itemStyle:{color:"#FF2A00"}},{name:t.$t("analysis.未评估"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.map((function(e){return e.notEvaluated})),itemStyle:{color:"#cfc6d3"}}]},a&&i.setOption(a)}))},searchSceneBtn:function(){this.getBusinessScenarioLevelByMonth(this.searchSceneForm)},getBusinessScenarioLevelByMonth:function(e){var t=this;y(e).then((function(e){var a,n=e.data.data,s=document.getElementById("getBusinessScenarioLevelByMonth"),i=r["a"](s);t.chartList.push(i),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:t.$t("analysis.获取最近几个月的业务场景风险"),textStyle:{fontSize:14}},legend:{orient:"vertical",right:10,top:20,tooltip:{show:!0},textStyle:{width:50,overflow:"truncate"}},grid:{top:70,right:90,bottom:"3%",containLabel:!0},yAxis:{type:"value",name:t.$t("analysis.数量"),nameTextStyle:{color:"#1481f2",fontWeight:"bold"},axisLine:{show:!0}},xAxis:{type:"category",data:n.month,name:t.$t("analysis.月份"),nameTextStyle:{color:"#1481f2",fontWeight:"bold"}},series:[{name:t.$t("analysis.低风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.infos.map((function(e){return e.low})),itemStyle:{color:"#2AFFFF"}},{name:t.$t("analysis.中风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.infos.map((function(e){return e.middle})),itemStyle:{color:"#FFFF7F"}},{name:t.$t("analysis.高风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.infos.map((function(e){return e.high})),itemStyle:{color:"#FFAA55"}},{name:t.$t("analysis.极高风险"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:n.infos.map((function(e){return e.veryHigh})),itemStyle:{color:"#FF2A00"}}]},a&&i.setOption(a)}))},searchAssetsAndSceneFormBtn:function(){this.getRecentlyAssetsAndScene(this.assetsAndSceneForm)},getRecentlyAssetsAndScene:function(e){var t=this;u(e).then((function(e){var a,n=e.data.data,s=document.getElementById("getRecentlyAssetsAndScene"),i=r["a"](s);t.chartList.push(i),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:t.$t("analysis.获取最近几个月未评估的资产或业务场景"),textStyle:{fontSize:14}},grid:[{bottom:10,width:"35%",right:"60%",containLabel:!0},{bottom:10,width:"35%",left:"52%",containLabel:!0}],xAxis:[{gridIndex:0,type:"category",data:Object.keys(n.assets),name:t.$t("analysis.月份"),nameLocation:"end",nameTextStyle:{color:"#1481f2",fontWeight:"bold"}},{gridIndex:1,type:"category",data:Object.keys(n.scene),name:t.$t("analysis.月份"),nameLocation:"end",nameTextStyle:{color:"#1481f2",fontWeight:"bold"}}],yAxis:[{gridIndex:0,type:"value",name:t.$t("analysis.资产数量"),minInterval:1,nameTextStyle:{color:"#1481f2",fontWeight:"bold"},axisLine:{show:!0}},{type:"value",gridIndex:1,name:t.$t("analysis.业务场景数量"),minInterval:1,nameTextStyle:{color:"#1481f2",fontWeight:"bold"},axisLine:{show:!0}}],series:[{data:Object.values(n.assets),type:"bar",itemStyle:{normal:{color:function(e){var t=["#6383b2","#6a63b2","#8b63b2","#b263ad"];return t[e.dataIndex]}}}},{xAxisIndex:1,yAxisIndex:1,data:Object.values(n.scene),type:"bar",itemStyle:{normal:{color:function(e){var t=["#6383b2","#6a63b2","#8b63b2","#b263ad"];return t[e.dataIndex]}}}}]},a&&i.setOption(a)}))}}},v=b,S=(a("e1b5"),a("2877")),x=Object(S["a"])(v,n,s,!1,null,"02c9aa6e",null);t["default"]=x.exports},e1b5:function(e,t,a){"use strict";a("4daa")}}]);